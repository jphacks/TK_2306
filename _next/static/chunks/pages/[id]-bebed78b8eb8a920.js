(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{3405:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[id]",function(){return n(1982)}])},9582:function(t,e,n){"use strict";var a=n(5893);n(7294);var s=n(536),i=n.n(s);function Banner(){return(0,a.jsxs)("div",{className:i().banner,children:[(0,a.jsx)("img",{src:"/banner_calender.svg",alt:"Banner Image"}),(0,a.jsx)("h1",{children:"Junan Shift"}),(0,a.jsx)("img",{src:"/banner_calender.svg",alt:"Banner Image"})]})}e.Z=Banner},7172:function(t,e,n){"use strict";n.r(e);var a=n(5893);n(7294),e.default=t=>{let{options:e,selectedOptions:n,setSelectedOptions:s}=t,handleCheckboxChange=(t,e)=>{let a=t.target.value;console.log("value",a),n[e].value=!n[e].value,s(n)};return(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:null==e?void 0:e.map((t,e)=>(0,a.jsxs)("label",{style:{marginBottom:"10px"},children:[(0,a.jsx)("input",{type:"checkbox",value:t.name,onChange:t=>{handleCheckboxChange(t,e)}}),t.name]},t.id))})}},1982:function(t,e,n){"use strict";n.r(e);var a=n(5893),s=n(7294),i=n(1163),r=n(6154),c=n(3646),l=n.n(c);n(5890);var o=n(8408),d=n(7172),u=n(9582),m=n(7536);e.default=()=>{let t=(0,i.useRouter)(),{id:e}=t.query,[n,c]=(0,s.useState)(""),[h,_]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[v,b]=(0,s.useState)([]),{register:y,control:g,getValues:C,setValue:N}=(0,m.cI)({defaultValues:{dates:[]}});(0,s.useEffect)(()=>{fetch("http://localhost:9000/attrs/".concat(e)).then(async t=>(t.ok||console.error("Error fetching attributes"),await t.json())).then(async t=>{x(t.attrs),b(t.attrs.map(t=>({attr_id:t.id,value:!1}))),console.log("User attributes:",t.attrs)}),fetch("http://localhost:9000/dates/".concat(e)).then(async t=>(t.ok||console.error("Error fetching attributes"),await t.json())).then(async t=>{let e=t.dates,n=new Set(e.map(t=>t.date)),a=Array.from(n);var s=a.map(()=>[]);for(var i of e){let t=a.indexOf(i.date);s[t].push(i.time_from,i.time_to)}N("dates",a.map(()=>[{from_time:"",to_time:""}])),_(a),j(s)})},[e]);let getCandidates=()=>{let t=C();var e=[];return t.dates.forEach((t,n)=>{for(var a of t)e.push({date:h[n],time_from:a.from_time,time_to:a.to_time})}),e},getAttributes=()=>v.map(t=>({attr_id:t.attr_id,value:t.value})),handleSubmit=async()=>{console.log("Selected options:",v);let a={group_id:e,name:n,attrs:getAttributes(),dates:getCandidates()};console.log("POST Data:",a),await r.Z.post("http://127.0.0.1:9000/users",a),t.push("/".concat(e,"/shift"))};return(0,a.jsxs)("div",{children:[(0,a.jsx)(u.Z,{}),(0,a.jsxs)("div",{className:l().container,children:[(0,a.jsx)("h1",{children:"シフト入力画面"}),(0,a.jsx)("div",{className:l().formsection,children:(0,a.jsx)("div",{className:l().inputcontainer,children:(0,a.jsxs)("label",{children:["name",(0,a.jsx)("input",{className:l().nameinput,type:"text",value:n,onChange:t=>c(t.target.value)})]})})}),(0,a.jsxs)("div",{className:l().formsection,children:[(0,a.jsx)("p",{children:"属性選択"}),(0,a.jsx)(d.default,{options:p,selectedOptions:v,setSelectedOptions:b})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"希望日時選択"}),(0,a.jsx)(o.default,{register:y,dates:h,candidateTimes:f,control:g})]}),(0,a.jsx)("div",{className:l().buttonContainer,children:(0,a.jsx)("button",{className:l().createButton,onClick:handleSubmit,children:"シフト生成"})})]})]})}},8408:function(t,e,n){"use strict";n.r(e);var a=n(5893);n(7294),n(5890);var s=n(7536),i=n(3646),r=n.n(i);let TimeCandidateList=t=>{var e;let{date:n,candidateTime:i,register:c,control:l,index:o}=t,{fields:d,append:u,remove:m}=(0,s.Dq)({control:l,name:"dates.".concat(o)});return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:n}),(0,a.jsx)("td",{children:null===(e=Array.from({length:i.length/2},(t,e)=>2*e).slice(0,4))||void 0===e?void 0:e.map(t=>{let e=t+1,n=i[t],s=i[e];return(0,a.jsx)("span",{className:r().candidateTime,children:"".concat(n," ~ ").concat(s)},t)})}),(0,a.jsxs)("td",{children:[d.map((t,e)=>(0,a.jsx)("div",{className:r().time_op,children:(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:r().timeContainer,children:[(0,a.jsx)("input",{className:r().timeInput,...c("dates.".concat(o,".").concat(e,".from_time"))}),(0,a.jsx)("p",{children:" ~ "}),(0,a.jsx)("input",{className:r().timeInput,...c("dates.".concat(o,".").concat(e,".to_time"))}),(0,a.jsx)("button",{type:"button",onClick:()=>m(e),children:"削除"})]})})},t.id)),(0,a.jsx)("button",{type:"button",onClick:()=>{u({from_time:"",to_time:""})},children:"行を追加"})]})]},o)};e.default=t=>{let{dates:e,candidateTimes:n,register:s,control:i}=t;return(0,a.jsxs)("table",{className:r().timeSlotTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"日付"}),(0,a.jsx)("th",{children:"候補時間"}),(0,a.jsx)("th",{children:"希望時間"})]})}),(0,a.jsx)("tbody",{children:null==e?void 0:e.map((t,r)=>(0,a.jsx)(TimeCandidateList,{control:i,index:r,register:s,date:e[r],candidateTime:n[r]},r))})]})}},536:function(t){t.exports={banner:"Banner_banner__c4pqb"}},3646:function(t){t.exports={container:"styles_container__TE5Ij",formsection:"styles_formsection__2d3k0",buttonContainer:"styles_buttonContainer__ACFXc",createButton:"styles_createButton__3SFFL","create-button":"styles_create-button__7_Ys9",inputcontainer:"styles_inputcontainer__BwXXp",nameinput:"styles_nameinput__MntQL",timeSlotTable:"styles_timeSlotTable__PtUCu",candidateTime:"styles_candidateTime__ivdG0",timeContainer:"styles_timeContainer__VqaNm",time_op:"styles_time_op__Ro47y",timeInput:"styles_timeInput__2o2L_"}},1163:function(t,e,n){t.exports=n(9974)}},function(t){t.O(0,[40,154,774,888,179],function(){return t(t.s=3405)}),_N_E=t.O()}]);